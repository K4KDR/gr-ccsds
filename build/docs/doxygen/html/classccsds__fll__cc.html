<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>GNU Radio&#39;s CCSDS Package: ccsds_fll_cc Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GNU Radio&#39;s CCSDS Package
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classccsds__fll__cc.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">ccsds_fll_cc Class Reference<div class="ingroups"><a class="el" href="group__synchronization.html">CCSDS synchronization blocks</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Frequency locked loop.Frequency estimation based on feedforward delay and multiply scheme. Sends frequency estimate to local_oscillator.  
 <a href="classccsds__fll__cc.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ccsds_fll_cc:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classccsds__fll__cc.png" usemap="#ccsds_fll_cc_map" alt=""/>
  <map id="ccsds_fll_cc_map" name="ccsds_fll_cc_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a31e30e4ed6efc36c1abb98110f9f73b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a31e30e4ed6efc36c1abb98110f9f73b5">~ccsds_fll_cc</a> ()</td></tr>
<tr class="separator:a31e30e4ed6efc36c1abb98110f9f73b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd27681d72ee30d3fcb31a3e8de2288d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#acd27681d72ee30d3fcb31a3e8de2288d">general_work</a> (int noutput_items, gr_vector_int &amp;ninput_items, gr_vector_const_void_star &amp;input_items, gr_vector_void_star &amp;output_items)</td></tr>
<tr class="separator:acd27681d72ee30d3fcb31a3e8de2288d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab6ea040134c65fda2390c7970b0a5721"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#ab6ea040134c65fda2390c7970b0a5721">ccsds_fll_cc</a> (unsigned int obsv_length, float loop_bw, unsigned int power, gr_msg_queue_sptr msgq)</td></tr>
<tr class="memdesc:ab6ea040134c65fda2390c7970b0a5721"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private constructor for frequency locked loop.  <a href="#ab6ea040134c65fda2390c7970b0a5721">More...</a><br/></td></tr>
<tr class="separator:ab6ea040134c65fda2390c7970b0a5721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7601cbb35308d7b7c5a444d627730ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#ad7601cbb35308d7b7c5a444d627730ba">calc_power</a> (gr_complex *out, const gr_complex *in, const unsigned int num)</td></tr>
<tr class="memdesc:ad7601cbb35308d7b7c5a444d627730ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">take an array of complex samples and compute their power.  <a href="#ad7601cbb35308d7b7c5a444d627730ba">More...</a><br/></td></tr>
<tr class="separator:ad7601cbb35308d7b7c5a444d627730ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a326d27979c9892f73a16552437c7f449"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a326d27979c9892f73a16552437c7f449">calc_diffs</a> (gr_complex *tmp_c, const gr_complex *in, const unsigned int num)</td></tr>
<tr class="memdesc:a326d27979c9892f73a16552437c7f449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the samplewise phase difference as a rotator.  <a href="#a326d27979c9892f73a16552437c7f449">More...</a><br/></td></tr>
<tr class="separator:a326d27979c9892f73a16552437c7f449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9fef8554d05fb34740276689521e2ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#ae9fef8554d05fb34740276689521e2ae">calc_summs</a> (gr_complex *phasors, unsigned int num)</td></tr>
<tr class="memdesc:ae9fef8554d05fb34740276689521e2ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accumulates blocks of samples from a complex array.  <a href="#ae9fef8554d05fb34740276689521e2ae">More...</a><br/></td></tr>
<tr class="separator:ae9fef8554d05fb34740276689521e2ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab096712f41451b4358d01155ed963a31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#ab096712f41451b4358d01155ed963a31">calc_phases</a> (float *tmp_f, const gr_complex *tmp_c, const unsigned int num)</td></tr>
<tr class="memdesc:ab096712f41451b4358d01155ed963a31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the phases of an array of complex numbers.  <a href="#ab096712f41451b4358d01155ed963a31">More...</a><br/></td></tr>
<tr class="separator:ab096712f41451b4358d01155ed963a31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361b842b11d9807368557f8c49bde11c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a361b842b11d9807368557f8c49bde11c">adjust_phases</a> (float *phases, unsigned int num)</td></tr>
<tr class="memdesc:a361b842b11d9807368557f8c49bde11c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Divides array samplewise by d_POWER.  <a href="#a361b842b11d9807368557f8c49bde11c">More...</a><br/></td></tr>
<tr class="separator:a361b842b11d9807368557f8c49bde11c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad01ab06dc66cd794e8d264823c99b7ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#ad01ab06dc66cd794e8d264823c99b7ff">get_lo_tags</a> (float *lo_freqs, const unsigned int num)</td></tr>
<tr class="memdesc:ad01ab06dc66cd794e8d264823c99b7ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks for new lo_frequency tags in blocks and returns their frequency value.  <a href="#ad01ab06dc66cd794e8d264823c99b7ff">More...</a><br/></td></tr>
<tr class="separator:ad01ab06dc66cd794e8d264823c99b7ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a15088005a78e9510223b713186d802"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a3a15088005a78e9510223b713186d802">fill_freqs</a> (float *tmp_f, float *tmp_fs, float *tmp_lo, const unsigned int num_out)</td></tr>
<tr class="memdesc:a3a15088005a78e9510223b713186d802"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sums up <code>tmp_fs</code> and <code>tmp_lo</code> elementwise and copies the sum into <code>tmp_f</code> <a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a> times each.  <a href="#a3a15088005a78e9510223b713186d802">More...</a><br/></td></tr>
<tr class="separator:a3a15088005a78e9510223b713186d802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b4ee125292839f349898629d76f863f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a1b4ee125292839f349898629d76f863f">send_freq_estimate</a> (double est)</td></tr>
<tr class="memdesc:a1b4ee125292839f349898629d76f863f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a frequency estimate to the asynchronous message queue.  <a href="#a1b4ee125292839f349898629d76f863f">More...</a><br/></td></tr>
<tr class="separator:a1b4ee125292839f349898629d76f863f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ba3ecb81dcd1a1e0c100066ded2ebf3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a9ba3ecb81dcd1a1e0c100066ded2ebf3">substract_lo_freq</a> (double *tmp_f, float *tmp_lo, const unsigned int num)</td></tr>
<tr class="separator:a9ba3ecb81dcd1a1e0c100066ded2ebf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25660fe294770fcd0bfe1a1ac362fccb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a25660fe294770fcd0bfe1a1ac362fccb">calc_rotation</a> (gr_complex *out, const gr_complex *in, const double *tmp_f, const unsigned int num)</td></tr>
<tr class="memdesc:a25660fe294770fcd0bfe1a1ac362fccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotates complex array according to frequency estimates.  <a href="#a25660fe294770fcd0bfe1a1ac362fccb">More...</a><br/></td></tr>
<tr class="separator:a25660fe294770fcd0bfe1a1ac362fccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3c751e8b3827c197d1d515bb4c834d40"><td class="memItemLeft" align="right" valign="top">const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40">D_L</a></td></tr>
<tr class="memdesc:a3c751e8b3827c197d1d515bb4c834d40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for observation length.  <a href="#a3c751e8b3827c197d1d515bb4c834d40">More...</a><br/></td></tr>
<tr class="separator:a3c751e8b3827c197d1d515bb4c834d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bbff88dbab86639f20c6b58f4a695a5"><td class="memItemLeft" align="right" valign="top">const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a0bbff88dbab86639f20c6b58f4a695a5">d_POWER</a></td></tr>
<tr class="memdesc:a0bbff88dbab86639f20c6b58f4a695a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for modulation removal power.  <a href="#a0bbff88dbab86639f20c6b58f4a695a5">More...</a><br/></td></tr>
<tr class="separator:a0bbff88dbab86639f20c6b58f4a695a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3c9c602ace7cfc5f6f1f367345cdc6"><td class="memItemLeft" align="right" valign="top">gr_msg_queue_sptr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#aff3c9c602ace7cfc5f6f1f367345cdc6">d_msgq</a></td></tr>
<tr class="memdesc:aff3c9c602ace7cfc5f6f1f367345cdc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared pointer to frequency correction message queue.  <a href="#aff3c9c602ace7cfc5f6f1f367345cdc6">More...</a><br/></td></tr>
<tr class="separator:aff3c9c602ace7cfc5f6f1f367345cdc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20560ff22ba970723ed2deb573f3ecfd"><td class="memItemLeft" align="right" valign="top">gr_complex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a20560ff22ba970723ed2deb573f3ecfd">d_last_sample</a></td></tr>
<tr class="memdesc:a20560ff22ba970723ed2deb573f3ecfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer for last sample before the current block.  <a href="#a20560ff22ba970723ed2deb573f3ecfd">More...</a><br/></td></tr>
<tr class="separator:a20560ff22ba970723ed2deb573f3ecfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc9c8bce692a6b267e4c00273eeacca0"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#acc9c8bce692a6b267e4c00273eeacca0">d_lo_freq</a></td></tr>
<tr class="separator:acc9c8bce692a6b267e4c00273eeacca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30e72800d68b69beecc603d06a0c2c69"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a30e72800d68b69beecc603d06a0c2c69">d_phase</a></td></tr>
<tr class="memdesc:a30e72800d68b69beecc603d06a0c2c69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer to store the current phase of the local oscillator, used to correct the detected frequency offset.  <a href="#a30e72800d68b69beecc603d06a0c2c69">More...</a><br/></td></tr>
<tr class="separator:a30e72800d68b69beecc603d06a0c2c69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9084dc0038575759026b737cd8b6baa8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlpf.html">lpf</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a9084dc0038575759026b737cd8b6baa8">d_filter</a></td></tr>
<tr class="memdesc:a9084dc0038575759026b737cd8b6baa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter to smooth frequency estimates.  <a href="#a9084dc0038575759026b737cd8b6baa8">More...</a><br/></td></tr>
<tr class="separator:a9084dc0038575759026b737cd8b6baa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7781bf7ccd68d892bc412edd541c2b0d"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a7781bf7ccd68d892bc412edd541c2b0d">dbg_file</a></td></tr>
<tr class="separator:a7781bf7ccd68d892bc412edd541c2b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9b2d38e0cc3ffd086e6b6e6122abf4"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#adb9b2d38e0cc3ffd086e6b6e6122abf4">dbg_file_pow</a></td></tr>
<tr class="separator:adb9b2d38e0cc3ffd086e6b6e6122abf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cec2ae9dcee40f9e80c88d840f233c3"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a9cec2ae9dcee40f9e80c88d840f233c3">dbg_file_dif</a></td></tr>
<tr class="separator:a9cec2ae9dcee40f9e80c88d840f233c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9818e91d9e7770850c6579c7628b242"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#ac9818e91d9e7770850c6579c7628b242">dbg_file_sum</a></td></tr>
<tr class="separator:ac9818e91d9e7770850c6579c7628b242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4ac09729f17172ca2b3a0704279d95f"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#ac4ac09729f17172ca2b3a0704279d95f">dbg_file_tag</a></td></tr>
<tr class="separator:ac4ac09729f17172ca2b3a0704279d95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45795d7e0f65f977da22930996894ddb"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a45795d7e0f65f977da22930996894ddb">dbg_count</a></td></tr>
<tr class="separator:a45795d7e0f65f977da22930996894ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c3f8952085a703ae47449eaa92b5eeb"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a7c3f8952085a703ae47449eaa92b5eeb">dbg_count_pow</a></td></tr>
<tr class="separator:a7c3f8952085a703ae47449eaa92b5eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47867cb0f30f7ea7283270da4f1b8ba"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#aa47867cb0f30f7ea7283270da4f1b8ba">dbg_count_dif</a></td></tr>
<tr class="separator:aa47867cb0f30f7ea7283270da4f1b8ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae9fe38193a9eff5ea2eb7f26d0e575"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#abae9fe38193a9eff5ea2eb7f26d0e575">dbg_count_sum</a></td></tr>
<tr class="separator:abae9fe38193a9eff5ea2eb7f26d0e575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35dccdf0d4aeb0f09686033d45ef04f4"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a35dccdf0d4aeb0f09686033d45ef04f4">dbg_count_tag</a></td></tr>
<tr class="separator:a35dccdf0d4aeb0f09686033d45ef04f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ae21576cea2645fb74809ad1df0169"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a68ae21576cea2645fb74809ad1df0169">dbg_input_toggle</a></td></tr>
<tr class="separator:a68ae21576cea2645fb74809ad1df0169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3ec161415de4a8046f7914d49f89125"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#ae3ec161415de4a8046f7914d49f89125">dbg_last_msg</a></td></tr>
<tr class="separator:ae3ec161415de4a8046f7914d49f89125"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a7fc035d5a0f52e6c4c42c69fd9e23fbc"><td class="memItemLeft" align="right" valign="top">static const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a7fc035d5a0f52e6c4c42c69fd9e23fbc">D_TWOPI</a></td></tr>
<tr class="memdesc:a7fc035d5a0f52e6c4c42c69fd9e23fbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant buffer of two pi with float precision.  <a href="#a7fc035d5a0f52e6c4c42c69fd9e23fbc">More...</a><br/></td></tr>
<tr class="separator:a7fc035d5a0f52e6c4c42c69fd9e23fbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a699d501de2a552f9bdeb38fbe1aca8e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api_8h.html#a144137922962dd54ae2e8c1917a7e588">CCSDS_API</a> ccsds_fll_cc_sptr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classccsds__fll__cc.html#a699d501de2a552f9bdeb38fbe1aca8e2">ccsds_make_fll_cc</a> (unsigned int obsv_length, float loop_bw, unsigned int power, gr_msg_queue_sptr msgq)</td></tr>
<tr class="memdesc:a699d501de2a552f9bdeb38fbe1aca8e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a frequency locked loop and return it's shared pointer.  <a href="#a699d501de2a552f9bdeb38fbe1aca8e2">More...</a><br/></td></tr>
<tr class="separator:a699d501de2a552f9bdeb38fbe1aca8e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Frequency locked loop.</p>
<p>Frequency estimation based on feedforward delay and multiply scheme. Sends frequency estimate to local_oscillator. </p>
<p>See also: <a class="el" href="page_lo_feedback.html">Local oscillator frequency correction feedback loop</a></p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd>Make sure outer loop is only updated when frequency tags arrive and drop the substraction of the frequecy tag. </dd></dl>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00046">46</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab6ea040134c65fda2390c7970b0a5721"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ccsds_fll_cc::ccsds_fll_cc </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>obsv_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>loop_bw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>power</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gr_msg_queue_sptr&#160;</td>
          <td class="paramname"><em>msgq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private constructor for frequency locked loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obsv_length</td><td>Number of samples that should be accumulated for a frequency estimate. Higher values are less sensitive to noise, but take more time during which the frequency could change. </td></tr>
    <tr><td class="paramname">loop_bw</td><td>Loop bandwidth of the loop filter. </td></tr>
    <tr><td class="paramname">power</td><td>Take the power of the incomming samples for frequency estimation instead of the incomming samples directly to cancel out modulations. For M-PSK modulated signal the M-th power is recommended, while <code>power=1</code> means take the incomming samples directly (modulations is still canceled out by averaging over <code>obsv_length</code> samples). </td></tr>
    <tr><td class="paramname">msgq</td><td>Message queue to store new frequency corrections. See <a class="el" href="page_lo_feedback.html">Local oscillator frequency correction feedback loop</a> for more details.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="ccsds__fll__cc_8h.html#a699d501de2a552f9bdeb38fbe1aca8e2" title="Create a frequency locked loop and return it&#39;s shared pointer. ">ccsds_make_fll_cc()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a31e30e4ed6efc36c1abb98110f9f73b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ccsds_fll_cc::~ccsds_fll_cc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a361b842b11d9807368557f8c49bde11c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::adjust_phases </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>phases</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Divides array samplewise by d_POWER. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phases</td><td>Array to process. Must contain at least <code>num</code> elements. Results are written back into this array. </td></tr>
    <tr><td class="paramname">num</td><td>Number of samples to process.</td></tr>
  </table>
  </dd>
</dl>
<p>By taking the M-th power of the samples the frequency offset between the samples is amplified by a factor of M. In this block this effect is reversed by dividing by d_POWER. </p>

</div>
</div>
<a class="anchor" id="a326d27979c9892f73a16552437c7f449"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::calc_diffs </td>
          <td>(</td>
          <td class="paramtype">gr_complex *&#160;</td>
          <td class="paramname"><em>tmp_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gr_complex *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the samplewise phase difference as a rotator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmp_c</td><td>Aligned complex array in which the differences should be stored. Memory for at least <code>num</code> elements must be allocated. </td></tr>
    <tr><td class="paramname">in</td><td>Complex array of samples which's differences should be computed. Must contain at least <code>num</code> elements. </td></tr>
    <tr><td class="paramname">num</td><td>Number of samples to process.</td></tr>
  </table>
  </dd>
</dl>
<p>Implements the delay and multiply frequency error detector tmp_c[k] = in[k] * conj(in[k-1]) where conj( . ) computes the complex conjugate.</p>
<p>The algorithm assumes a complex sample 1+0j at the very beginning and stores the last sample per block for the next iteration after the first run. This way <code>num</code> input samples generate <code>num</code> output samples without going out of array bounds.</p>
<p>This block is using volk, <code>tmp_c</code> <b>must</b> be aligned, <code>in</code> <b>should</b> be aligned for better performance. </p>

</div>
</div>
<a class="anchor" id="ab096712f41451b4358d01155ed963a31"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::calc_phases </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>tmp_f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gr_complex *&#160;</td>
          <td class="paramname"><em>tmp_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the phases of an array of complex numbers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmp_f</td><td><b>Aligned</b> Array in which the phases should be stored in. Memory must be allocated for at least <code>num</code> elements. </td></tr>
    <tr><td class="paramname">tmp_c</td><td><b>Aligned</b> array of complex samples which's phases should be calculated. </td></tr>
    <tr><td class="paramname">num</td><td>Number of samples to process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad7601cbb35308d7b7c5a444d627730ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::calc_power </td>
          <td>(</td>
          <td class="paramtype">gr_complex *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gr_complex *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>take an array of complex samples and compute their power. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>Complex array to store the computed powers. Memory for at least <code>num</code> elements must be allocated. </td></tr>
    <tr><td class="paramname">in</td><td>Complex array of samples to compute the power from. Must contain at least <code>num</code> elements. </td></tr>
    <tr><td class="paramname">num</td><td>Number of samples to process.</td></tr>
  </table>
  </dd>
</dl>
<p>Take the complex input array <code>in</code>, calculate the samplewise power d_POWER and store them in <code>out</code>.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd>Check if volk kernel of new GNU radio version computes the right powers and switch back to volk if true. </dd></dl>

</div>
</div>
<a class="anchor" id="a25660fe294770fcd0bfe1a1ac362fccb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::calc_rotation </td>
          <td>(</td>
          <td class="paramtype">gr_complex *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gr_complex *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>tmp_f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rotates complex array according to frequency estimates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>Complex array to store the rotated samples in. Memory for at least <code>num</code> elements must be allocated. </td></tr>
    <tr><td class="paramname">in</td><td>Complex array of samples to be rotated. Must contain at least <code>num</code> elements. </td></tr>
    <tr><td class="paramname">tmp_f</td><td>Per sample phase increase (i.e. frequency) estimate in radians. Must contain at least <code>num</code> elements. </td></tr>
    <tr><td class="paramname">num</td><td>Number of samples to process.</td></tr>
  </table>
  </dd>
</dl>
<p>Rotates samplewise by local phase <a class="el" href="classccsds__fll__cc.html#a30e72800d68b69beecc603d06a0c2c69" title="Buffer to store the current phase of the local oscillator, used to correct the detected frequency off...">ccsds_fll_cc::d_phase</a>, which is increased by the estimates in <code>tmp_f</code> after each rotation. </p>

</div>
</div>
<a class="anchor" id="ae9fef8554d05fb34740276689521e2ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::calc_summs </td>
          <td>(</td>
          <td class="paramtype">gr_complex *&#160;</td>
          <td class="paramname"><em>phasors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Accumulates blocks of samples from a complex array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phasors</td><td>Complex vector of samples that should be accumulated. Must contain at least <code>num</code> elements. The accumulated results will be written back into this vector into the first <code>num/</code> <code><a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a></code> positions. </td></tr>
    <tr><td class="paramname">num</td><td>Number of samples to process, must be a multiple of <a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a>.</td></tr>
  </table>
  </dd>
</dl>
<p>Accumulates blocks of <a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a> samples and stores them at the begining of <code>phasors</code>. Used to filter out modulations and smooth the frequency estimates. </p>

</div>
</div>
<a class="anchor" id="a3a15088005a78e9510223b713186d802"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::fill_freqs </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>tmp_f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>tmp_fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>tmp_lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>num_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sums up <code>tmp_fs</code> and <code>tmp_lo</code> elementwise and copies the sum into <code>tmp_f</code> <a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a> times each. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmp_f</td><td>Array in which to store the sums. Memory must be allocated for at least <code>num_out</code> elements. </td></tr>
    <tr><td class="paramname">tmp_fs</td><td>Array with summands. Must contain at least <code>num_out/</code> <code><a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a></code> elements. </td></tr>
    <tr><td class="paramname">tmp_lo</td><td>Array with summands. Must contain at least <code>num_out/</code> <code><a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a></code> elements. </td></tr>
    <tr><td class="paramname">num_out</td><td>Number of samples to output.</td></tr>
  </table>
  </dd>
</dl>
<p>By summing over <a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a> samples each we decimated by a rate of <a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a>. While summing up tmp_fs and tmp_lo we repeat them <a class="el" href="classccsds__fll__cc.html#a3c751e8b3827c197d1d515bb4c834d40" title="Storage for observation length. ">ccsds_fll_cc::D_L</a> times each to return to the original input rate. </p>

</div>
</div>
<a class="anchor" id="acd27681d72ee30d3fcb31a3e8de2288d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ccsds_fll_cc::general_work </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>noutput_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gr_vector_int &amp;&#160;</td>
          <td class="paramname"><em>ninput_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gr_vector_const_void_star &amp;&#160;</td>
          <td class="paramname"><em>input_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gr_vector_void_star &amp;&#160;</td>
          <td class="paramname"><em>output_items</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad01ab06dc66cd794e8d264823c99b7ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::get_lo_tags </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>lo_freqs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Looks for new lo_frequency tags in blocks and returns their frequency value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lo_freqs</td><td>Array in which the estimates should be written. Memory for at least <code>num</code> elements must be allocated. </td></tr>
    <tr><td class="paramname">num</td><td>Number of samples to process.</td></tr>
  </table>
  </dd>
</dl>
<p>/note The current version of <a class="el" href="classccsds__fll__cc.html" title="Frequency locked loop.Frequency estimation based on feedforward delay and multiply scheme...">ccsds_fll_cc</a> does not conform to the new lo frequency feedback scheme and needs to be updated. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000013">Todo:</a></b></dt><dd>Update to new lo frequency feedback scheme. </dd></dl>

</div>
</div>
<a class="anchor" id="a1b4ee125292839f349898629d76f863f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::send_freq_estimate </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>est</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a frequency estimate to the asynchronous message queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">est</td><td>Frequency estimate to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="page_lo_feedback.html">Local oscillator frequency correction feedback loop</a> </dd>
<dd>
<a class="el" href="ccsds__lo__feedback_8h.html" title="Defines all parameters for the frequency feedback loop. ">ccsds_lo_feedback.h</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a9ba3ecb81dcd1a1e0c100066ded2ebf3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ccsds_fll_cc::substract_lo_freq </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>tmp_f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>tmp_lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>not needed any more! </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000014">Todo:</a></b></dt><dd>remove frequency substraction </dd></dl>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a699d501de2a552f9bdeb38fbe1aca8e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api_8h.html#a144137922962dd54ae2e8c1917a7e588">CCSDS_API</a> ccsds_fll_cc_sptr ccsds_make_fll_cc </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>obsv_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>loop_bw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>power</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gr_msg_queue_sptr&#160;</td>
          <td class="paramname"><em>msgq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a frequency locked loop and return it's shared pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obsv_length</td><td>Number of samples that should be accumulated for a frequency estimate. Higher values are less sensitive to noise, but take more time during which the frequency could change. </td></tr>
    <tr><td class="paramname">loop_bw</td><td>Loop bandwidth of the loop filter. </td></tr>
    <tr><td class="paramname">power</td><td>Take the power of the incomming samples for frequency estimation instead of the incomming samples directly to cancel out modulations. For M-PSK modulated signal the M-th power is recommended, while power=1 means take the incomming samples directly (modulations is still canceled out by averaging over <code>obsv_length</code> samples). </td></tr>
    <tr><td class="paramname">msgq</td><td>Message queue to store new frequency corrections. See <a class="el" href="page_lo_feedback.html">Local oscillator frequency correction feedback loop</a> for more details. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Shared pointer to the created FLL block. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Might not work out of the box with the <a class="el" href="classccsds__local__oscillator__cc.html" title="Local oscillator controlled by asynchronous frequency correctionsOscillates with an internal frequenc...">ccsds_local_oscillator_cc</a> as it is matched to <a class="el" href="classccsds__dll__cc.html" title="Delay locked loop decimating from sample- to symbolrateDelay estimation based on the Gardner passband...">ccsds_dll_cc</a> right now. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>Match frquency corrections to new LO interface </dd></dl>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a9084dc0038575759026b737cd8b6baa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlpf.html">lpf</a>* ccsds_fll_cc::d_filter</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Filter to smooth frequency estimates. </p>
<p>Linear first order low pass filter to smooth frequency estimates. </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00104">104</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3c751e8b3827c197d1d515bb4c834d40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int ccsds_fll_cc::D_L</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Storage for observation length. </p>
<p>How many samples should be accumulated in order to cancel modulation and smooth estimate. Set by <a class="el" href="classccsds__fll__cc.html#ab6ea040134c65fda2390c7970b0a5721" title="Private constructor for frequency locked loop. ">ccsds_fll_cc::ccsds_fll_cc()</a> </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00056">56</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a20560ff22ba970723ed2deb573f3ecfd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gr_complex ccsds_fll_cc::d_last_sample</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer for last sample before the current block. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classccsds__fll__cc.html#a326d27979c9892f73a16552437c7f449" title="Calculate the samplewise phase difference as a rotator. ">calc_diffs()</a></dd></dl>
<p>To determine the phase difference between the first sample of a block and the previous sample, this sample is buffered here.</p>
<p>Is initialized to 1+0j by <a class="el" href="classccsds__fll__cc.html#ab6ea040134c65fda2390c7970b0a5721" title="Private constructor for frequency locked loop. ">ccsds_fll_cc::ccsds_fll_cc()</a>. </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00088">88</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="acc9c8bce692a6b267e4c00273eeacca0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float ccsds_fll_cc::d_lo_freq</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>fix frequency feedback loop </dd></dl>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00091">91</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="aff3c9c602ace7cfc5f6f1f367345cdc6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gr_msg_queue_sptr ccsds_fll_cc::d_msgq</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shared pointer to frequency correction message queue. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="page_lo_feedback.html">Local oscillator frequency correction feedback loop</a> </dd>
<dd>
<a class="el" href="ccsds__lo__feedback_8h.html" title="Defines all parameters for the frequency feedback loop. ">ccsds_lo_feedback.h</a></dd></dl>
<p>Shared pointer to the message queue where frequency corrections should be send to. </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00077">77</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a30e72800d68b69beecc603d06a0c2c69"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float ccsds_fll_cc::d_phase</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer to store the current phase of the local oscillator, used to correct the detected frequency offset. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classccsds__fll__cc.html#a25660fe294770fcd0bfe1a1ac362fccb" title="Rotates complex array according to frequency estimates. ">calc_rotation()</a> </dd></dl>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00098">98</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0bbff88dbab86639f20c6b58f4a695a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int ccsds_fll_cc::d_POWER</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Storage for modulation removal power. </p>
<p>Which power of the input samples should be computed for further processing. If set to 1, the input samples will be used directly. Set by <a class="el" href="classccsds__fll__cc.html#ab6ea040134c65fda2390c7970b0a5721" title="Private constructor for frequency locked loop. ">ccsds_fll_cc::ccsds_fll_cc()</a> </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00064">64</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7fc035d5a0f52e6c4c42c69fd9e23fbc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const float ccsds_fll_cc::D_TWOPI</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constant buffer of two pi with float precision. </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00067">67</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a45795d7e0f65f977da22930996894ddb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ccsds_fll_cc::dbg_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief Counter for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00279">279</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa47867cb0f30f7ea7283270da4f1b8ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ccsds_fll_cc::dbg_count_dif</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief Counter for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00285">285</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7c3f8952085a703ae47449eaa92b5eeb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ccsds_fll_cc::dbg_count_pow</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief Counter for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00282">282</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="abae9fe38193a9eff5ea2eb7f26d0e575"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ccsds_fll_cc::dbg_count_sum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief Counter for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00288">288</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a35dccdf0d4aeb0f09686033d45ef04f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ccsds_fll_cc::dbg_count_tag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief Counter for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00291">291</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7781bf7ccd68d892bc412edd541c2b0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FILE* ccsds_fll_cc::dbg_file</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief File pointer for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00264">264</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9cec2ae9dcee40f9e80c88d840f233c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FILE* ccsds_fll_cc::dbg_file_dif</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief File pointer for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00270">270</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="adb9b2d38e0cc3ffd086e6b6e6122abf4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FILE* ccsds_fll_cc::dbg_file_pow</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief File pointer for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00267">267</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac9818e91d9e7770850c6579c7628b242"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FILE* ccsds_fll_cc::dbg_file_sum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief File pointer for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00273">273</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac4ac09729f17172ca2b3a0704279d95f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FILE* ccsds_fll_cc::dbg_file_tag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief File pointer for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00276">276</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a68ae21576cea2645fb74809ad1df0169"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ccsds_fll_cc::dbg_input_toggle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief Counter for debugging </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00294">294</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae3ec161415de4a8046f7914d49f89125"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float ccsds_fll_cc::dbg_last_msg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>/brief Buffer for last send frequency estimate </p>

<p>Definition at line <a class="el" href="ccsds__fll__cc_8h_source.html#l00297">297</a> of file <a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ccsds__fll__cc_8h_source.html">ccsds_fll_cc.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classccsds__fll__cc.html">ccsds_fll_cc</a></li>
    <li class="footer">Generated on Mon Nov 30 2015 22:33:44 for GNU Radio&#39;s CCSDS Package by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
