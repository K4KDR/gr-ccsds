<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>GNU Radio&#39;s CCSDS Package: Local oscillator frequency correction feedback loop</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GNU Radio&#39;s CCSDS Package
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_lo_feedback.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Local oscillator frequency correction feedback loop </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="page_lo_feedback_introduction"></a>
Introduction</h1>
<p>Usually frequency errors introduced by doppler shift and drifts between sending and receiving oscillators are corrected by a frequency or phase synchronization block after the matched filter. Since the matched filter should only cut out the original signal and attenuate additional noise as much as possible, parts of the signal shifted by a frequency offset can be attenuated as well by the matched filter. The purpose of this local oscillator is to compensate frequency errors before the signal passes the matched filter, while the frequency offset estimation is performed after the matched filter to benefit from the better SNR and possible channel synchronization before the frequency offset estimator.</p>
<h1><a class="anchor" id="page_lo_feedback_setup"></a>
Setup</h1>
<p>The essential parts of the frrequency feedback loop are the local oscillator (LO), the reception filter (often a matched filter, MF), a decimator (DEC) to convert from sample to symbol rate and a synchronization block that is capable of estimating the frequency offset and sending it back as an asynchronous message.</p>
<div class="image">
<img src="LO_Feedback_Loop.png" alt="LO_Feedback_Loop.png"/>
<div class="caption">
Principal setup of the frequency feedback loop</div></div>
<p> There can be other blocks in between or one block doing more than one of the above mentioned functionalities as long as the sample stream arriving at the frequency estimator is at symbol rate and still has the frequency tags attatched.</p>
<h2><a class="anchor" id="page_lo_feedback_setup_example"></a>
Example</h2>
<p>Below is an example of the frequency feedback loop as used in the M-PSK receiver of this package where an additional gain control block is added and the delay locked loop acts as a decimator as well. The frequency offset is estimated and compensated by the phase locked loop.</p>
<div class="image">
<img src="LO_Feedback_Loop_Example.png" alt="LO_Feedback_Loop_Example.png"/>
<div class="caption">
Example setup of the frequency feedback loop in the M-PSK receiver of this package</div></div>
 <h1><a class="anchor" id="page_lo_feedback_msg"></a>
Frequency correction messages</h1>
<p>The frequency estimator sends the frequency offset between two symbols it observes to the local oscillator. The local oscillator converts this offset in a per sample offset and adds it to it's current frequency estimate which should result in a zero frequency offset for the samples going out of the oscillator.</p>
<p>The frequency correction messages are standard GNU Radio messages of length zero. The frequency estimate is passed as the per symbol phase difference in rad as <code>arg1</code> while <code>arg2</code> and the message type are defined by <a class="el" href="ccsds__lo__feedback_8h.html#a8047f6d4280e138a25f9c4f468e485e3" title="Message type used for sending frequency corrections to the local oscillator. ">MSG_FREQ_TYPE</a> and <a class="el" href="ccsds__lo__feedback_8h.html#a6fd68ae69a03d13692abee47fc14192f" title="Value used for message&#39;s arg2 when sending frequency corrections to the local oscillator. ">MSG_FREQ_ARG2</a> defined in <a class="el" href="ccsds__lo__feedback_8h.html" title="Defines all parameters for the frequency feedback loop. ">ccsds_lo_feedback.h</a> . </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Nov 30 2015 22:33:44 for GNU Radio&#39;s CCSDS Package by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
