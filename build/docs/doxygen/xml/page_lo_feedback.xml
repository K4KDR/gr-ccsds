<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="page_lo_feedback" kind="page">
    <compoundname>page_lo_feedback</compoundname>
    <title>Local oscillator frequency correction feedback loop</title>
    <detaileddescription>
<sect1 id="page_lo_feedback_1page_lo_feedback_introduction">
<title>Introduction</title>
<para>Usually frequency errors introduced by doppler shift and drifts between sending and receiving oscillators are corrected by a frequency or phase synchronization block after the matched filter. Since the matched filter should only cut out the original signal and attenuate additional noise as much as possible, parts of the signal shifted by a frequency offset can be attenuated as well by the matched filter. The purpose of this local oscillator is to compensate frequency errors before the signal passes the matched filter, while the frequency offset estimation is performed after the matched filter to benefit from the better SNR and possible channel synchronization before the frequency offset estimator.</para></sect1>
<sect1 id="page_lo_feedback_1page_lo_feedback_setup">
<title>Setup</title>
<para>The essential parts of the frrequency feedback loop are the local oscillator (LO), the reception filter (often a matched filter, MF), a decimator (DEC) to convert from sample to symbol rate and a synchronization block that is capable of estimating the frequency offset and sending it back as an asynchronous message.</para><para><image type="html" name="LO_Feedback_Loop.png">Principal setup of the frequency feedback loop</image>
 There can be other blocks in between or one block doing more than one of the above mentioned functionalities as long as the sample stream arriving at the frequency estimator is at symbol rate and still has the frequency tags attatched.</para><sect2 id="page_lo_feedback_1page_lo_feedback_setup_example">
<title>Example</title>
<para>Below is an example of the frequency feedback loop as used in the M-PSK receiver of this package where an additional gain control block is added and the delay locked loop acts as a decimator as well. The frequency offset is estimated and compensated by the phase locked loop.</para><para><image type="html" name="LO_Feedback_Loop_Example.png">Example setup of the frequency feedback loop in the M-PSK receiver of this package</image>
 </para></sect2>
</sect1>
<sect1 id="page_lo_feedback_1page_lo_feedback_msg">
<title>Frequency correction messages</title>
<para>The frequency estimator sends the frequency offset between two symbols it observes to the local oscillator. The local oscillator converts this offset in a per sample offset and adds it to it&apos;s current frequency estimate which should result in a zero frequency offset for the samples going out of the oscillator.</para><para>The frequency correction messages are standard GNU Radio messages of length zero. The frequency estimate is passed as the per symbol phase difference in rad as <computeroutput>arg1</computeroutput> while <computeroutput>arg2</computeroutput> and the message type are defined by <ref refid="ccsds__lo__feedback_8h_1a8047f6d4280e138a25f9c4f468e485e3" kindref="member">MSG_FREQ_TYPE</ref> and <ref refid="ccsds__lo__feedback_8h_1a6fd68ae69a03d13692abee47fc14192f" kindref="member">MSG_FREQ_ARG2</ref> defined in <ref refid="ccsds__lo__feedback_8h" kindref="compound">ccsds_lo_feedback.h</ref> . </para></sect1>
    </detaileddescription>
  </compounddef>
</doxygen>
